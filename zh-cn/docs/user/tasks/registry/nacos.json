{
  "filename": "nacos.md",
  "__html": "<h1>使用 Nacos 作为注册中心</h1>\n<h2>1. 准备工作</h2>\n<ul>\n<li>dubbo-go cli 工具和依赖工具已安装</li>\n<li>创建一个新的 demo 应用</li>\n<li>启动一个 Nacos 实例，暴露 8848 端口</li>\n</ul>\n<h2>2. 配置注册中心</h2>\n<p>修改服务端配置 go-server/conf/dubbogo.yaml</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">dubbo:</span>\n  <span class=\"hljs-attr\">registries:</span>\n    <span class=\"hljs-attr\">nacos:</span> <span class=\"hljs-comment\"># 配置 Nacos 注册中心</span>\n      <span class=\"hljs-attr\">protocol:</span> <span class=\"hljs-string\">nacos</span>\n      <span class=\"hljs-attr\">address:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-string\">:8848</span> <span class=\"hljs-comment\"># 指定 Nacos 地址</span>\n  <span class=\"hljs-attr\">protocols:</span>\n    <span class=\"hljs-attr\">triple:</span>\n      <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">tri</span>\n      <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">20000</span>\n  <span class=\"hljs-attr\">provider:</span>\n    <span class=\"hljs-attr\">services:</span>\n      <span class=\"hljs-attr\">GreeterProvider:</span>\n        <span class=\"hljs-attr\">interface:</span> <span class=\"hljs-string\">\"\"</span> <span class=\"hljs-comment\"># read from pb</span>\n</code></pre>\n<p>修改客户端配置 go-client/conf/dubbogo.yaml</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">dubbo:</span>\n  <span class=\"hljs-attr\">registries:</span>\n    <span class=\"hljs-attr\">nacos:</span>\n      <span class=\"hljs-attr\">protocol:</span> <span class=\"hljs-string\">nacos</span>\n      <span class=\"hljs-attr\">address:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-string\">:8848</span>\n  <span class=\"hljs-attr\">consumer:</span>\n    <span class=\"hljs-attr\">references:</span>\n      <span class=\"hljs-attr\">GreeterClientImpl:</span>\n        <span class=\"hljs-attr\">protocol:</span> <span class=\"hljs-string\">tri</span>\n        <span class=\"hljs-attr\">interface:</span> <span class=\"hljs-string\">\"\"</span> <span class=\"hljs-comment\"># read from pb</span>\n</code></pre>\n<h2>3. 使用 Nacos 进行服务发现</h2>\n<ul>\n<li>\n<p>启动go-server/cmd，查看日志</p>\n<pre><code class=\"language-bash\">[Nacos Registry] Registry instance with param ...\n</code></pre>\n<p>日志中包含 Nacos 注册信息，将当前服务接口注册在 Nacos。</p>\n<p>可登陆控制台 <a href=\"http://localhost:8848/nacos\">http://localhost:8848/nacos</a> 查看注册的服务</p>\n</li>\n<li>\n<p>启动 go-client/cmd 查看日志</p>\n<pre><code> [Nacos Registry] Update begin, service event: ServiceEvent{Action{add}, Path{tri://xxx.xxx.xxx.xxx:20000/api.Greeter ...\n</code></pre>\n<p>日志中包含 Nacos 注册组件的订阅事件信息，获取到服务端 IP 和端口号，显示调用成功。</p>\n<pre><code>client response result: name:&quot;Hello laurence&quot; id:&quot;12345&quot; age:21\n</code></pre>\n</li>\n</ul>\n<h2>4. 更多支持的注册中心</h2>\n<p>参考 <a href=\"https://github.com/apache/dubbo-go-samples/tree/master/registry\">dubbo-go-samples/registry</a></p>\n",
  "link": "/zh-cn/docs/user/tasks/registry/nacos.html",
  "meta": {
    "title": "使用 Nacos 作为注册中心",
    "keywords": "使用 Nacos 作为注册中心",
    "description": "使用 Nacos 作为注册中心"
  }
}