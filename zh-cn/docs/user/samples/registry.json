{
  "filename": "registry.md",
  "__html": "<h1>Dubbogo 3.0 注册中心配置</h1>\n<p>参考samples <a href=\"https://github.com/apache/dubbo-go-samples/tree/master/registry\">dubbo-go-samples/registry</a></p>\n<h2>Registry 注册中心配置</h2>\n<ul>\n<li><strong>Nacos 注册中心</strong></li>\n</ul>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">dubbo:</span>\n  <span class=\"hljs-attr\">application:</span> <span class=\"hljs-comment\"># 应用信息，服务启动后会将相关信息注册到注册中心，可被客户端从 url 中识别</span>\n    <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">myApp</span> <span class=\"hljs-comment\"># application=myApp; name=myApp</span>\n    <span class=\"hljs-attr\">module:</span> <span class=\"hljs-string\">opensource</span> <span class=\"hljs-comment\"># module=opensource</span>\n    <span class=\"hljs-attr\">organization:</span> <span class=\"hljs-string\">dubbo</span> <span class=\"hljs-comment\"># organization=dubbo</span>\n    <span class=\"hljs-attr\">owner:</span> <span class=\"hljs-string\">laurence</span> <span class=\"hljs-comment\"># owner=laurence</span>\n    <span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">myversion</span> <span class=\"hljs-comment\"># app.version=myversion</span>\n    <span class=\"hljs-attr\">environment:</span> <span class=\"hljs-string\">pro</span> <span class=\"hljs-comment\"># environment=pro</span>\n  <span class=\"hljs-attr\">registries:</span>\n    <span class=\"hljs-attr\">nacosWithCustomGroup:</span>\n      <span class=\"hljs-attr\">protocol:</span> <span class=\"hljs-string\">nacos</span> <span class=\"hljs-comment\"># 注册中心选择 nacos </span>\n      <span class=\"hljs-attr\">address:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-string\">:8848</span> <span class=\"hljs-comment\"># nacos ip</span>\n      <span class=\"hljs-attr\">group:</span> <span class=\"hljs-string\">myGroup</span> <span class=\"hljs-comment\"># nacos group, 默认 DEFAULT_GROUP</span>\n      <span class=\"hljs-attr\">namespace:</span> <span class=\"hljs-string\">9fb00abb-278d-42fc-96bf-e0151601e4a1</span> <span class=\"hljs-comment\"># nacos namespaceID, should be created before. 默认public</span>\n      <span class=\"hljs-attr\">username:</span> <span class=\"hljs-string\">abc</span>\n      <span class=\"hljs-attr\">password:</span> <span class=\"hljs-string\">abc</span>\n  <span class=\"hljs-attr\">protocols:</span>\n    <span class=\"hljs-attr\">dubbo:</span>\n      <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">dubbo</span>\n      <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">20000</span>\n  <span class=\"hljs-attr\">provider:</span>\n    <span class=\"hljs-attr\">services:</span>\n      <span class=\"hljs-attr\">UserProviderWithCustomGroupAndVersion:</span> <span class=\"hljs-comment\"># 接口三元组：接口名、版本号、分组。client 和 server 需要保持一致。</span>\n        <span class=\"hljs-attr\">interface:</span> <span class=\"hljs-string\">org.apache.dubbo.UserProvider.Test</span> <span class=\"hljs-comment\"># 接口名必填</span>\n        <span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">myInterfaceVersion</span> <span class=\"hljs-comment\"># 默认为空</span>\n        <span class=\"hljs-attr\">group:</span> <span class=\"hljs-string\">myInterfaceGroup</span> <span class=\"hljs-comment\"># 默认为空</span>\n</code></pre>\n<p>dubbogo 的注册中心配置的 group、namespace、username、password，均与 nacos 相关概念对应。</p>\n<ul>\n<li><strong>Zookeeper 注册中心</strong></li>\n</ul>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">dubbo:</span>\n  <span class=\"hljs-comment\"># application: 与nacos 一致，不再赘述</span>\n  <span class=\"hljs-attr\">registries:</span>\n    <span class=\"hljs-attr\">demoZK:</span>\n      <span class=\"hljs-attr\">protocol:</span> <span class=\"hljs-string\">zookeeper</span> <span class=\"hljs-comment\"># 注册中心选择 nacos </span>\n      <span class=\"hljs-attr\">address:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-string\">:2181</span> <span class=\"hljs-comment\"># zookeeper ip</span>\n      <span class=\"hljs-attr\">group:</span> <span class=\"hljs-string\">myGroup</span> <span class=\"hljs-comment\"># nacos group, 默认 dubbo</span>\n  <span class=\"hljs-attr\">protocols:</span>\n    <span class=\"hljs-attr\">triple:</span>\n      <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">tri</span>\n      <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">20000</span>\n  <span class=\"hljs-attr\">provider:</span>\n    <span class=\"hljs-attr\">services:</span>\n      <span class=\"hljs-attr\">UserProviderWithCustomGroupAndVersion:</span> <span class=\"hljs-comment\"># 接口三元组：接口名、版本号、分组。client 和 server 需要保持一致。</span>\n        <span class=\"hljs-attr\">interface:</span> <span class=\"hljs-string\">com.apache.dubbo.sample.basic.IGreeter</span> <span class=\"hljs-comment\"># 接口名必填</span>\n        <span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">myInterfaceVersion</span> <span class=\"hljs-comment\"># 默认为空</span>\n        <span class=\"hljs-attr\">group:</span> <span class=\"hljs-string\">myInterfaceGroup</span> <span class=\"hljs-comment\"># 默认为空</span>\n</code></pre>\n<p>zookeeper 注册时，provider 端将接口信息注册在<code>/$(group)/$(interface)/providers</code> 节点，以上面配置为例，注册的 zk  path 为 <code>/myGroup/com.apache.dubbo.sample.basic.IGreeter/providers/</code></p>\n<p>consumer 端注册在 /<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>(</mo><mi>g</mi><mi>r</mi><mi>o</mi><mi>u</mi><mi>p</mi><mo>)</mo><mi mathvariant=\"normal\">/</mi></mrow><annotation encoding=\"application/x-tex\">(group)/</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mopen\">(</span><span class=\"mord mathit\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathit\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathit\">o</span><span class=\"mord mathit\">u</span><span class=\"mord mathit\">p</span><span class=\"mclose\">)</span><span class=\"mord mathrm\">/</span></span></span></span>(interface)/consumers 作统计用。</p>\n<ul>\n<li><strong>ETCD 注册中心</strong></li>\n</ul>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">dubbo:</span>\n  <span class=\"hljs-attr\">registries:</span>\n    <span class=\"hljs-attr\">etcd:</span>\n      <span class=\"hljs-attr\">protocol:</span> <span class=\"hljs-string\">etcdv3</span>\n      <span class=\"hljs-attr\">timeout:</span> <span class=\"hljs-string\">3s</span>\n      <span class=\"hljs-attr\">address:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-string\">:2379</span>\n  <span class=\"hljs-attr\">protocols:</span>\n    <span class=\"hljs-attr\">dubbo:</span>\n      <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">dubbo</span>\n      <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">20000</span>\n  <span class=\"hljs-attr\">provider:</span>\n    <span class=\"hljs-attr\">services:</span>\n      <span class=\"hljs-attr\">UserProvider:</span>\n        <span class=\"hljs-attr\">interface:</span> <span class=\"hljs-string\">org.apache.dubbo.UserProvider</span>\n</code></pre>\n<ul>\n<li><strong>应用级服务注册发现</strong></li>\n</ul>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">dubbo:</span>\n  <span class=\"hljs-attr\">registries:</span>\n    <span class=\"hljs-attr\">demoZK:</span>\n      <span class=\"hljs-attr\">protocol:</span> <span class=\"hljs-string\">zookeeper</span> <span class=\"hljs-comment\"># nacos/zookeeper</span>\n      <span class=\"hljs-attr\">address:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-string\">:2181</span>\n      <span class=\"hljs-attr\">registry-type:</span> <span class=\"hljs-string\">service</span> <span class=\"hljs-comment\"># 使用应用级服务发现</span>\n  <span class=\"hljs-attr\">metadata-report:</span> <span class=\"hljs-comment\"># 配置元数据中心</span>\n    <span class=\"hljs-attr\">protocol:</span> <span class=\"hljs-string\">zookeeper</span>\n    <span class=\"hljs-attr\">address:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-string\">:2181</span>\n  <span class=\"hljs-attr\">protocols:</span>\n    <span class=\"hljs-attr\">triple:</span>\n      <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">tri</span>\n      <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">20000</span>\n  <span class=\"hljs-attr\">provider:</span>\n    <span class=\"hljs-attr\">services:</span>\n      <span class=\"hljs-attr\">GreeterProvider:</span>\n        <span class=\"hljs-attr\">interface:</span> <span class=\"hljs-string\">com.apache.dubbo.sample.basic.IGreeter</span>\n</code></pre>\n<p>下一章: <a href=\"./exception_response.html\">【Triple 协议异常回传】</a></p>\n",
  "link": "/zh-cn/docs/user/samples/registry.html",
  "meta": {
    "title": "dubbogo 3.0 注册中心",
    "keywords": "dubbogo 3.0 注册中心",
    "description": "dubbogo 3.0 注册中心"
  }
}